{
  "properties": {
    "connectionReferences": {
      "shared_commondataserviceforapps": {
        "runtimeSource": "embedded",
        "connection": {
          "connectionReferenceLogicalName": "cr771_sharedcommondataserviceforapps_6a295"
        },
        "api": {
          "name": "shared_commondataserviceforapps"
        }
      },
      "shared_office365": {
        "runtimeSource": "embedded",
        "connection": {
          "connectionReferenceLogicalName": "mpa_CoffeeConnectOfficeOutlook"
        },
        "api": {
          "name": "shared_office365"
        }
      }
    },
    "definition": {
      "$schema": "https://schema.management.azure.com/providers/Microsoft.Logic/schemas/2016-06-01/workflowdefinition.json#",
      "contentVersion": "1.0.0.0",
      "parameters": {
        "$connections": {
          "defaultValue": {},
          "type": "Object"
        },
        "$authentication": {
          "defaultValue": {},
          "type": "SecureObject"
        }
      },
      "triggers": {
        "Recurrence": {
          "recurrence": {
            "frequency": "Week",
            "interval": 1,
            "startTime": "2023-05-27T00:00:00Z",
            "schedule": {
              "weekDays": [
                "Monday"
              ]
            }
          },
          "metadata": {
            "operationMetadataId": "b8326bf1-d3fb-40a0-93fc-4b66a5d67bf1"
          },
          "type": "Recurrence"
        }
      },
      "actions": {
        "List_PowerCoffeeRings": {
          "runAfter": {
            "Initialize_Empty_Array": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "a184e33f-61ab-42ef-9ed1-c29f12cd1ce9"
          },
          "type": "OpenApiConnection",
          "inputs": {
            "host": {
              "connectionName": "shared_commondataserviceforapps",
              "operationId": "ListRecords",
              "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps"
            },
            "parameters": {
              "entityName": "mpa_coffeeconnectrings",
              "$filter": "cr771_name eq cr771_name"
            },
            "authentication": "@parameters('$authentication')"
          }
        },
        "For_Each_Ring_(Outer_Loop)": {
          "foreach": "@outputs('List_PowerCoffeeRings')?['body/value']",
          "actions": {
            "For_Each_User_in_the_Current_Ring_(Inner_Loop)": {
              "foreach": "@outputs('List_PowerCoffeeSignUps')?['body/value']",
              "actions": {
                "Check_for_Valid_Ring_and_Match_Frequency": {
                  "actions": {
                    "Compose_Users_Ready_to_Match_with_Valid_Ring": {
                      "runAfter": {},
                      "metadata": {
                        "operationMetadataId": "535bd4f6-e4d3-4d85-b62e-dcc9b1ae822a"
                      },
                      "type": "Compose",
                      "inputs": {
                        "Name": "@body('Parse_JSON_for_Each_Ring_Member')?['cr771_membername']",
                        "ID_Number": "@body('Parse_JSON_for_Each_Ring_Member')?['cr771_name']",
                        "Email": "@body('Parse_JSON_for_Each_Ring_Member')?['cr771_email']",
                        "Business Group": "@body('Parse_JSON_for_Each_Ring_Member')?['cr771_businessgroup']",
                        "Ring": "@body('Parse_JSON_for_Each_Ring_Member')?['_cr771_ring_value@OData.Community.Display.V1.FormattedValue']",
                        "Meeting_Location": "@body('Parse_JSON_for_Each_Ring_Member')?['_cr771_meetinglocation_value@OData.Community.Display.V1.FormattedValue']",
                        "Meeting_Frequency": "@body('Parse_JSON_for_Each_Ring_Member')?['cr771_meetingfrequency']"
                      }
                    },
                    "Append_to_Users_to_Match_Array": {
                      "runAfter": {
                        "Compose_Users_Ready_to_Match_with_Valid_Ring": [
                          "Succeeded"
                        ]
                      },
                      "metadata": {
                        "operationMetadataId": "7e7db261-6053-4a04-9fe3-f8b0ebbcb024"
                      },
                      "type": "AppendToArrayVariable",
                      "inputs": {
                        "name": "arr_users_to_match",
                        "value": "@outputs('Compose_Users_Ready_to_Match_with_Valid_Ring')"
                      }
                    }
                  },
                  "runAfter": {
                    "Switch": [
                      "Succeeded"
                    ]
                  },
                  "expression": {
                    "equals": [
                      "@mod(variables('int_week_number'),variables('int_meeting_frequency'))",
                      0
                    ]
                  },
                  "metadata": {
                    "operationMetadataId": "46687585-929a-4502-b5b7-9f8751c871c4"
                  },
                  "type": "If"
                },
                "Parse_JSON_for_Each_Ring_Member": {
                  "runAfter": {},
                  "metadata": {
                    "operationMetadataId": "d3bb6c05-de24-4584-84d2-645a1528bb7f"
                  },
                  "type": "ParseJson",
                  "inputs": {
                    "content": "@items('For_Each_User_in_the_Current_Ring_(Inner_Loop)')",
                    "schema": {
                      "type": "object",
                      "properties": {
                        "cr771_name": {
                          "type": "string"
                        },
                        "cr771_membername": {
                          "type": "string"
                        },
                        "cr771_email": {
                          "type": "string"
                        },
                        "cr771_businessgroup": {
                          "type": "string"
                        },
                        "_cr771_ring_value@OData.Community.Display.V1.FormattedValue": {
                          "type": "string"
                        },
                        "_cr771_meetinglocation_value@OData.Community.Display.V1.FormattedValue": {
                          "type": "string"
                        },
                        "cr771_meetingfrequency": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                },
                "Switch": {
                  "runAfter": {
                    "Parse_JSON_for_Each_Ring_Member": [
                      "Succeeded"
                    ]
                  },
                  "cases": {
                    "Case_1:_Weekly": {
                      "case": 52,
                      "actions": {
                        "Set_Meeting_Frequency_Variable_(Weekly)": {
                          "runAfter": {},
                          "metadata": {
                            "operationMetadataId": "630a3291-0948-4939-9e01-6cad98836881"
                          },
                          "type": "SetVariable",
                          "inputs": {
                            "name": "int_meeting_frequency",
                            "value": 1
                          }
                        }
                      }
                    },
                    "Case_2:_Bi-Weekly": {
                      "case": 26,
                      "actions": {
                        "Set_Meeting_Frequency_Variable_(Bi-Weekly)": {
                          "runAfter": {},
                          "metadata": {
                            "operationMetadataId": "e7fd3b1e-17ad-4cee-b3b9-2a3e809a00a1"
                          },
                          "type": "SetVariable",
                          "inputs": {
                            "name": "int_meeting_frequency",
                            "value": 2
                          }
                        }
                      }
                    },
                    "Case_3:_Monthly": {
                      "case": 12,
                      "actions": {
                        "Set_Meeting_Frequency_Variable_(Monthly)": {
                          "runAfter": {},
                          "metadata": {
                            "operationMetadataId": "dfb40770-838f-436f-8246-2ef0f2a4079d"
                          },
                          "type": "SetVariable",
                          "inputs": {
                            "name": "int_meeting_frequency",
                            "value": 4
                          }
                        }
                      }
                    },
                    "Case_4:_Bi-Monthly": {
                      "case": 6,
                      "actions": {
                        "Set_Meeting_Frequency_Variable_(Bi-Monthly)": {
                          "runAfter": {},
                          "metadata": {
                            "operationMetadataId": "ab9aedf5-c038-40c7-ae3f-582023bc6265"
                          },
                          "type": "SetVariable",
                          "inputs": {
                            "name": "int_meeting_frequency",
                            "value": 8
                          }
                        }
                      }
                    },
                    "Case_5:_Quarterly": {
                      "case": 4,
                      "actions": {
                        "Set_Meeting_Frequency_Variable_(Quarterly)": {
                          "runAfter": {},
                          "metadata": {
                            "operationMetadataId": "c83902aa-a94c-4846-bd90-bc48bcd747f6"
                          },
                          "type": "SetVariable",
                          "inputs": {
                            "name": "int_meeting_frequency",
                            "value": 12
                          }
                        }
                      }
                    }
                  },
                  "default": {
                    "actions": {}
                  },
                  "expression": "@body('Parse_JSON_for_Each_Ring_Member')?['cr771_meetingfrequency']",
                  "metadata": {
                    "operationMetadataId": "143dba9f-b2da-4503-b301-0b43eba47aa9"
                  },
                  "type": "Switch"
                }
              },
              "runAfter": {
                "List_PowerCoffeeSignUps": [
                  "Succeeded"
                ]
              },
              "metadata": {
                "operationMetadataId": "6e0226ac-bc9b-4766-a9cb-caa9abf0e2b2"
              },
              "type": "Foreach"
            },
            "List_PowerCoffeeSignUps": {
              "runAfter": {
                "Clear_Users_to_Match_Array": [
                  "Succeeded"
                ]
              },
              "metadata": {
                "operationMetadataId": "33be3bdb-2572-45ac-a64f-7de0047558f6"
              },
              "type": "OpenApiConnection",
              "inputs": {
                "host": {
                  "connectionName": "shared_commondataserviceforapps",
                  "operationId": "ListRecords",
                  "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps"
                },
                "parameters": {
                  "entityName": "cr771_powercoffeesignups",
                  "$filter": "_cr771_ring_value eq @{items('For_Each_Ring_(Outer_Loop)')?['mpa_coffeeconnectringid']}"
                },
                "authentication": "@parameters('$authentication')"
              }
            },
            "Clear_Users_to_Match_Array": {
              "runAfter": {},
              "metadata": {
                "operationMetadataId": "2ad9e3b8-085e-462e-a853-3c857f0f0e9a"
              },
              "type": "SetVariable",
              "inputs": {
                "name": "arr_users_to_match",
                "value": "@variables('arr_empty')"
              }
            },
            "Set_Match_Counter_to_Length_of_Users_to_Match_Array": {
              "runAfter": {
                "For_Each_User_in_the_Current_Ring_(Inner_Loop)": [
                  "Succeeded"
                ]
              },
              "metadata": {
                "operationMetadataId": "d8c09bd3-0343-46e2-9a5a-0fd1853a2faf"
              },
              "type": "SetVariable",
              "inputs": {
                "name": "int_match_counter",
                "value": "@length(variables('arr_users_to_match'))"
              }
            },
            "Check_If_Counter_is_Equal_to_Zero_(List_is_Empty)": {
              "actions": {},
              "runAfter": {
                "Set_Match_Counter_to_Length_of_Users_to_Match_Array": [
                  "Succeeded"
                ]
              },
              "else": {
                "actions": {
                  "Do_Until_Counter_Reaches_Zero_(All_Matches_Made)": {
                    "actions": {
                      "Get_First_User_at_Random": {
                        "runAfter": {},
                        "metadata": {
                          "operationMetadataId": "b09f7802-f128-456d-9784-2fac50bc049c"
                        },
                        "type": "Compose",
                        "inputs": "@variables('arr_users_to_match')[rand(0,length(variables('arr_users_to_match')))]"
                      },
                      "Filter_Users_to_Match_Array": {
                        "runAfter": {
                          "Get_First_User_at_Random": [
                            "Succeeded"
                          ]
                        },
                        "metadata": {
                          "operationMetadataId": "028af696-a949-4c6c-a76f-858b1213447f"
                        },
                        "type": "Query",
                        "inputs": {
                          "from": "@variables('arr_users_to_match')",
                          "where": "@not(equals(item(), outputs('Get_First_User_at_Random')))"
                        }
                      },
                      "Set_Users_to_Match_Array_to_Filtered_Array": {
                        "runAfter": {
                          "Filter_Users_to_Match_Array": [
                            "Succeeded"
                          ]
                        },
                        "metadata": {
                          "operationMetadataId": "6da1fe1c-890d-486d-a2fc-384133b88540"
                        },
                        "type": "SetVariable",
                        "inputs": {
                          "name": "arr_users_to_match",
                          "value": "@body('Filter_Users_to_Match_Array')"
                        }
                      },
                      "Decrement_Match_Counter": {
                        "runAfter": {
                          "Set_Users_to_Match_Array_to_Filtered_Array": [
                            "Succeeded"
                          ]
                        },
                        "metadata": {
                          "operationMetadataId": "3c2314e1-f7cb-4a67-a51c-0895d33d5e64"
                        },
                        "type": "DecrementVariable",
                        "inputs": {
                          "name": "int_match_counter",
                          "value": 1
                        }
                      },
                      "Reset_User_Previous_Matches": {
                        "runAfter": {
                          "Decrement_Match_Counter": [
                            "Succeeded"
                          ]
                        },
                        "metadata": {
                          "operationMetadataId": "b1c57f41-d9df-4d75-9625-52ca58dcb2c2"
                        },
                        "type": "SetVariable",
                        "inputs": {
                          "name": "obj_user_previous_matches",
                          "value": {}
                        }
                      },
                      "Set_Least_Matches_to_Max": {
                        "runAfter": {
                          "Reset_User_Previous_Matches": [
                            "Succeeded"
                          ]
                        },
                        "metadata": {
                          "operationMetadataId": "3b764771-22e5-4041-a68a-2f02e4f69f46"
                        },
                        "type": "SetVariable",
                        "inputs": {
                          "name": "int_least_matches",
                          "value": 999999999
                        }
                      },
                      "Set_Best_Match_to_Null": {
                        "runAfter": {
                          "Set_Least_Matches_to_Max": [
                            "Succeeded"
                          ]
                        },
                        "metadata": {
                          "operationMetadataId": "a0898b2e-611b-4569-beda-bd8e69a27b67"
                        },
                        "type": "SetVariable",
                        "inputs": {
                          "name": "obj_best_match",
                          "value": "@null"
                        }
                      },
                      "Apply_to_Each_User_to_Match": {
                        "foreach": "@variables('arr_users_to_match')",
                        "actions": {
                          "Check_Ring_Membership_of_First_User": {
                            "actions": {
                              "Check_Previous_Matches_of_First_User": {
                                "actions": {},
                                "runAfter": {},
                                "else": {
                                  "actions": {
                                    "Compose_New_Previous_Match": {
                                      "runAfter": {},
                                      "metadata": {
                                        "operationMetadataId": "7fe7b91f-c60f-4115-bffe-0563f17a2293"
                                      },
                                      "type": "Compose",
                                      "inputs": "@addProperty(variables('obj_user_previous_matches'),items('Apply_to_Each_User_to_Match').ID_Number,0)"
                                    },
                                    "Set_User_Previous_Matches_Object": {
                                      "runAfter": {
                                        "Compose_New_Previous_Match": [
                                          "Succeeded"
                                        ]
                                      },
                                      "metadata": {
                                        "operationMetadataId": "66142e9d-5693-45c5-9512-164f95ddd6bd"
                                      },
                                      "type": "SetVariable",
                                      "inputs": {
                                        "name": "obj_user_previous_matches",
                                        "value": "@outputs('Compose_New_Previous_Match')"
                                      }
                                    }
                                  }
                                },
                                "expression": {
                                  "contains": [
                                    "@string(variables('obj_user_previous_matches'))",
                                    "@items('Apply_to_Each_User_to_Match')['ID_Number']"
                                  ]
                                },
                                "metadata": {
                                  "operationMetadataId": "c9c1dc27-f8b7-4928-8d2e-b5538f420750"
                                },
                                "type": "If"
                              },
                              "Check_that_User_Previous_Matches_is_less_than_Least_Match": {
                                "actions": {
                                  "Set_Least_Match": {
                                    "runAfter": {},
                                    "metadata": {
                                      "operationMetadataId": "549e1dda-be7d-4bf4-b321-2e78d82b5bcd"
                                    },
                                    "type": "SetVariable",
                                    "inputs": {
                                      "name": "int_least_matches",
                                      "value": "@variables('obj_user_previous_matches')[items('Apply_to_Each_User_to_Match').ID_Number]"
                                    }
                                  },
                                  "Set_Best_Match": {
                                    "runAfter": {
                                      "Set_Least_Match": [
                                        "Succeeded"
                                      ]
                                    },
                                    "metadata": {
                                      "operationMetadataId": "19ed1054-af7d-41e0-9d48-5b2b8403846a"
                                    },
                                    "type": "SetVariable",
                                    "inputs": {
                                      "name": "obj_best_match",
                                      "value": "@items('Apply_to_Each_User_to_Match')"
                                    }
                                  }
                                },
                                "runAfter": {
                                  "Check_Previous_Matches_of_First_User": [
                                    "Succeeded"
                                  ]
                                },
                                "expression": {
                                  "less": [
                                    "@variables('obj_user_previous_matches')[items('Apply_to_Each_User_to_Match').ID_Number]",
                                    "@variables('int_least_matches')"
                                  ]
                                },
                                "metadata": {
                                  "operationMetadataId": "7158ccca-8410-4de4-8da0-e21259dc053e"
                                },
                                "type": "If"
                              }
                            },
                            "runAfter": {},
                            "expression": {
                              "and": [
                                {
                                  "not": {
                                    "equals": [
                                      "@outputs('Get_First_User_at_Random')['Email']",
                                      "@items('Apply_to_Each_User_to_Match')['Email']"
                                    ]
                                  }
                                },
                                {
                                  "contains": [
                                    "@outputs('Get_First_User_at_Random')['Ring']",
                                    "@items('Apply_to_Each_User_to_Match')['Ring']"
                                  ]
                                },
                                {
                                  "contains": [
                                    "@outputs('Get_First_User_at_Random')['Meeting_Location']",
                                    "@items('Apply_to_Each_User_to_Match')['Meeting_Location']"
                                  ]
                                }
                              ]
                            },
                            "metadata": {
                              "operationMetadataId": "2201f8ed-0ba8-4263-9cf9-6c1f0aec5a98"
                            },
                            "type": "If"
                          }
                        },
                        "runAfter": {
                          "Set_Best_Match_to_Null": [
                            "Succeeded"
                          ]
                        },
                        "metadata": {
                          "operationMetadataId": "7d19cfc6-f26d-437d-844f-b419f5ae9471"
                        },
                        "type": "Foreach"
                      },
                      "Check_if_Best_Match_is_Not_Null": {
                        "actions": {
                          "Filter_Users_to_Match_by_Best_Match": {
                            "runAfter": {},
                            "metadata": {
                              "operationMetadataId": "230d2c77-4761-416e-8888-62be796276b6"
                            },
                            "type": "Query",
                            "inputs": {
                              "from": "@variables('arr_users_to_match')",
                              "where": "@not(equals(item(), variables('obj_best_match')))"
                            }
                          },
                          "Set_Users_to_Match": {
                            "runAfter": {
                              "Filter_Users_to_Match_by_Best_Match": [
                                "Succeeded"
                              ]
                            },
                            "metadata": {
                              "operationMetadataId": "e03a716a-9c70-4741-a9bd-a4cf447f6023"
                            },
                            "type": "SetVariable",
                            "inputs": {
                              "name": "arr_users_to_match",
                              "value": "@body('Filter_Users_to_Match_by_Best_Match')"
                            }
                          },
                          "Decrement_Match_Counter_(Again)": {
                            "runAfter": {
                              "Set_Users_to_Match": [
                                "Succeeded"
                              ]
                            },
                            "metadata": {
                              "operationMetadataId": "d0bda854-e289-4deb-94b3-79a4580ebac5"
                            },
                            "type": "DecrementVariable",
                            "inputs": {
                              "name": "int_match_counter",
                              "value": 1
                            }
                          },
                          "Add_a_new_row": {
                            "runAfter": {
                              "Send_an_email_(V2)": [
                                "Succeeded"
                              ]
                            },
                            "metadata": {
                              "operationMetadataId": "37191149-9fb1-4d64-bc96-64d670889fa1"
                            },
                            "type": "OpenApiConnection",
                            "inputs": {
                              "host": {
                                "connectionName": "shared_commondataserviceforapps",
                                "operationId": "CreateRecord",
                                "apiId": "/providers/Microsoft.PowerApps/apis/shared_commondataserviceforapps"
                              },
                              "parameters": {
                                "entityName": "cr771_matchhistories",
                                "item/cr771_name": "0",
                                "item/cr771_user1email": "@outputs('Get_First_User_at_Random').Email",
                                "item/cr771_user2email": "@variables('obj_best_match').Email",
                                "item/cr771_status": "Future",
                                "item/cr771_ring": "@outputs('Get_First_User_at_Random')['Ring']",
                                "item/cr771_user1": "@outputs('Get_First_User_at_Random')['Name']",
                                "item/cr771_user2": "@variables('obj_best_match')['Name']"
                              },
                              "authentication": "@parameters('$authentication')"
                            }
                          },
                          "Send_an_email_(V2)": {
                            "runAfter": {
                              "Decrement_Match_Counter_(Again)": [
                                "Succeeded"
                              ]
                            },
                            "metadata": {
                              "operationMetadataId": "5043b9bc-7442-4468-bcf2-e09e5963e402"
                            },
                            "type": "OpenApiConnection",
                            "inputs": {
                              "host": {
                                "connectionName": "shared_office365",
                                "operationId": "SendEmailV2",
                                "apiId": "/providers/Microsoft.PowerApps/apis/shared_office365"
                              },
                              "parameters": {
                                "emailMessage/To": "@{variables('obj_best_match').Email};@{outputs('Get_First_User_at_Random').Email}",
                                "emailMessage/Subject": "Your Coffee Connect Meeting for the Week",
                                "emailMessage/Body": "<p><span style=\"font-size: 12px\">Hello!</span><span style=\"font-size: 16px\"><br>\n</span><br>\nThanks for participating in Coffee Connect. You have been matched with the other person in the <strong>To</strong> line!<br>\n<br>\n<strong>Please return to the Coffee Connect app to schedule a meeting in just one click.</strong><br>\n<br>\nRing: @{outputs('Get_First_User_at_Random').Ring}<br>\nLocation: @{outputs('Get_First_User_at_Random').Meeting_Location}<br>\n<br>\nPerson 1: @{outputs('Get_First_User_at_Random').Name} (@{outputs('Get_First_User_at_Random').Email})<br>\nPerson 2: @{variables('obj_best_match').Name} (@{variables('obj_best_match').Email})<br>\n<br>\nSincerely,<br>\nCoffee Connect</p>",
                                "emailMessage/Importance": "Normal"
                              },
                              "authentication": "@parameters('$authentication')"
                            }
                          }
                        },
                        "runAfter": {
                          "Apply_to_Each_User_to_Match": [
                            "Succeeded"
                          ]
                        },
                        "expression": {
                          "not": {
                            "equals": [
                              "@variables('obj_best_match')",
                              "@null"
                            ]
                          }
                        },
                        "metadata": {
                          "operationMetadataId": "9018b881-1555-4b30-99a8-2e6122fb8c7d"
                        },
                        "type": "If"
                      }
                    },
                    "runAfter": {},
                    "expression": "@equals(variables('int_match_counter'), 0)",
                    "limit": {
                      "count": 60,
                      "timeout": "PT1H"
                    },
                    "metadata": {
                      "operationMetadataId": "4e155d9c-afd1-4ee9-9656-0bac49a9ef1a"
                    },
                    "type": "Until"
                  }
                }
              },
              "expression": {
                "equals": [
                  "@variables('int_match_counter')",
                  0
                ]
              },
              "metadata": {
                "operationMetadataId": "d86d3171-1086-4baf-ac83-ededda259eca"
              },
              "type": "If"
            }
          },
          "runAfter": {
            "List_PowerCoffeeRings": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "a5b09bc9-6b6e-4b4a-8617-388866f05780"
          },
          "type": "Foreach"
        },
        "Initialize_Empty_Array": {
          "runAfter": {
            "Initialize_Matches_Array": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "4f808daa-1a74-4ce0-9c22-4245188f5c4e"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "arr_empty",
                "type": "array"
              }
            ]
          }
        },
        "Initialize_Timezone_Variable": {
          "runAfter": {},
          "metadata": {
            "operationMetadataId": "bcb054d8-a4e7-4bea-8f7c-2bad120a6694"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "str_timezone",
                "type": "string",
                "value": "@{addHours(utcNow(),-7)}"
              }
            ]
          }
        },
        "Initialize_Week_Number_Variable": {
          "runAfter": {
            "Initialize_Timezone_Variable": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "daa29c09-aa16-4c93-81f0-19f2e05e71e3"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "int_week_number",
                "type": "integer",
                "value": "@div(dayOfYear(variables('str_timezone')),7)"
              }
            ]
          }
        },
        "Initialize_User_Previous_Matches_Object": {
          "runAfter": {
            "Initialize_Meeting_Frequency_Variable": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "c2d2729c-8f31-4a42-8fef-c1428df68a9b"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "obj_user_previous_matches",
                "type": "object",
                "value": {}
              }
            ]
          }
        },
        "Initialize_Match_Counter_Variable": {
          "runAfter": {
            "Initialize_Users_to_Match_Array": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "b71a2302-f4d9-4e88-bab5-3b8331de8f30"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "int_match_counter",
                "type": "integer",
                "value": 0
              }
            ]
          }
        },
        "Initialize_Least_Matches_Variable": {
          "runAfter": {
            "Initialize_Match_Counter_Variable": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "371ac491-7ff1-4608-8fc8-afb7e5d4233c"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "int_least_matches",
                "type": "integer",
                "value": 999999999
              }
            ]
          }
        },
        "Initialize_Best_Match_Object": {
          "runAfter": {
            "Initialize_Least_Matches_Variable": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "39ee6bbc-3bfe-4ccc-b8cd-61f4837c277f"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "obj_best_match",
                "type": "object"
              }
            ]
          }
        },
        "Initialize_Matches_Array": {
          "runAfter": {
            "Initialize_Best_Match_Object": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "7869ef6b-1ec0-4a58-8089-f8298fbd54a1"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "arr_matches",
                "type": "array",
                "value": []
              }
            ]
          }
        },
        "Initialize_Users_to_Match_Array": {
          "runAfter": {
            "Initialize_User_Previous_Matches_Object": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "c03ac681-712c-4144-b766-50c6e99f7efd"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "arr_users_to_match",
                "type": "array",
                "value": []
              }
            ]
          }
        },
        "Initialize_Meeting_Frequency_Variable": {
          "runAfter": {
            "Initialize_Week_Number_Variable": [
              "Succeeded"
            ]
          },
          "metadata": {
            "operationMetadataId": "9d28dda7-a079-4097-8ef5-17737c4d1e1c"
          },
          "type": "InitializeVariable",
          "inputs": {
            "variables": [
              {
                "name": "int_meeting_frequency",
                "type": "integer",
                "value": 0
              }
            ]
          }
        }
      }
    },
    "templateName": ""
  },
  "schemaVersion": "1.0.0.0"
}